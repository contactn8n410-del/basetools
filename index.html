<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BaseTools â€” Smart Contract Analyzer for Base Chain</title>
<meta name="description" content="Analyze any smart contract on Base chain. Free bytecode analysis, pattern detection, ERC standard identification. Premium deep security audits.">
<style>
:root{--bg:#0a0a0f;--card:#12121a;--accent:#0052ff;--accent2:#3b82f6;--text:#e0e0e0;--dim:#888}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;min-height:100vh}
.container{max-width:800px;margin:0 auto;padding:2rem 1rem}
h1{font-size:2rem;margin-bottom:.5rem}h1 span{color:var(--accent)}
.subtitle{color:var(--dim);margin-bottom:2rem}
.card{background:var(--card);border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;border:1px solid #222}
.card h2{font-size:1.2rem;margin-bottom:1rem}
input,button,textarea{font-size:1rem;padding:.75rem 1rem;border-radius:8px;border:1px solid #333;background:#1a1a24;color:var(--text);width:100%}
input:focus{outline:none;border-color:var(--accent)}
button{background:var(--accent);border:none;cursor:pointer;font-weight:600;margin-top:.5rem}
button:hover{background:var(--accent2)}button:disabled{opacity:.5;cursor:not-allowed}
.result{margin-top:1rem;padding:1rem;background:#0d0d14;border-radius:8px;font-family:monospace;font-size:.85rem;white-space:pre-wrap;max-height:400px;overflow-y:auto;display:none}
.pricing{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1.5rem 0}
.plan{background:var(--card);border-radius:12px;padding:1.5rem;border:1px solid #222;text-align:center}
.plan.premium{border-color:var(--accent)}
.plan h3{margin-bottom:.5rem}.plan .price{font-size:1.5rem;font-weight:700;color:var(--accent);margin:.5rem 0}
.plan ul{text-align:left;list-style:none;padding:0}.plan ul li{padding:.25rem 0}.plan ul li::before{content:"âœ“ ";color:#4ade80}
.badge{display:inline-block;background:var(--accent);color:#fff;padding:2px 8px;border-radius:4px;font-size:.75rem;margin-left:.5rem}
.payment-info{background:#1a1a24;border:1px dashed var(--accent);border-radius:8px;padding:1rem;margin:1rem 0;font-size:.9rem}
.payment-info code{background:#0d0d14;padding:2px 6px;border-radius:4px;word-break:break-all}
.status{padding:.5rem 1rem;border-radius:8px;margin-top:.5rem;font-size:.9rem}
.status.checking{background:#1a1a24;color:#f0c040}
.status.verified{background:#0d2a0d;color:#4ade80}
.status.error{background:#2a0d0d;color:#f04040}
.free-label{color:#4ade80;font-weight:600}
.loader{display:inline-block;width:16px;height:16px;border:2px solid #333;border-top-color:var(--accent);border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
footer{text-align:center;color:var(--dim);margin-top:3rem;font-size:.85rem}
@media(max-width:600px){.pricing{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="container">
  <h1>âš¡ <span>BaseTools</span></h1>
  <p class="subtitle">Smart Contract & Wallet Analyzer for Base Chain</p>

  <div class="card">
    <h2>ğŸ” Analyze Address <span class="free-label">FREE</span></h2>
    <p style="color:var(--dim);margin-bottom:1rem">Paste any Base address â€” contract or wallet. Get type detection, balance, bytecode patterns, ERC standards.</p>
    <input type="text" id="addr" placeholder="0x... any address on Base" />
    <button onclick="analyze()" id="analyzeBtn">Analyze</button>
    <div class="result" id="result"></div>
  </div>

  <div class="card">
    <h2>ğŸ›¡ï¸ Deep Security Audit <span class="badge">PREMIUM</span></h2>
    <p style="color:var(--dim);margin-bottom:1rem">Full bytecode security scan: vulnerability detection, risk scoring, storage analysis, function selectors, reentrancy checks.</p>
    <input type="text" id="premAddr" placeholder="0x... contract address on Base" />
    <button onclick="showPayment()" id="auditBtn">Unlock Deep Audit â€” 0.001 ETH (~$2.70)</button>
    <div id="paymentSection" style="display:none">
      <div class="payment-info">
        <p><strong>Pay on Base (L2 â€” gas &lt; $0.01):</strong></p>
        <p style="margin:.5rem 0">Send exactly <strong>0.001 ETH</strong> on <strong>Base</strong> to:</p>
        <p><code>0x0282BdE2f138babC6ABa3bb010121112cC1d7eDa</code></p>
        <p style="margin-top:.5rem;color:var(--dim)">After sending, paste your transaction hash:</p>
      </div>
      <input type="text" id="txHash" placeholder="0x... transaction hash" />
      <button onclick="verifyAndAudit()">Verify Payment & Run Audit</button>
      <div id="payStatus"></div>
    </div>
    <div class="result" id="premResult"></div>
  </div>

  <h2 style="margin-top:2rem">Pricing</h2>
  <div class="pricing">
    <div class="plan">
      <h3>Free Analysis</h3>
      <div class="price">$0</div>
      <ul>
        <li>Contract/wallet detection</li>
        <li>Balance & tx count</li>
        <li>Bytecode pattern scan</li>
        <li>ERC standard detection</li>
        <li>Proxy detection</li>
        <li>Recent events count</li>
      </ul>
    </div>
    <div class="plan premium">
      <h3>Deep Audit</h3>
      <div class="price">0.001 ETH</div>
      <p style="color:var(--dim);font-size:.85rem">~$2.70 per audit</p>
      <ul>
        <li>Everything in Free</li>
        <li>Vulnerability scan</li>
        <li>Risk score (0-100)</li>
        <li>Reentrancy analysis</li>
        <li>Storage slot reading</li>
        <li>Function selector extraction</li>
        <li>SELFDESTRUCT detection</li>
        <li>Proxy upgrade risk</li>
      </ul>
    </div>
  </div>

  <div class="card" style="text-align:center">
    <h2>ğŸ”— Built on Base</h2>
    <p style="color:var(--dim)">All data fetched directly from Base L2 via RPC. No accounts needed. Pay in ETH on Base (gas &lt; $0.01).</p>
    <p style="color:var(--dim);margin-top:.5rem">Open source: <a href="https://github.com/contactn8n410-del/basetools" style="color:var(--accent)">GitHub</a></p>
  </div>

  <footer>
    <p>BaseTools âš¡ Smart contract analysis powered by on-chain data</p>
  </footer>
</div>

<script>
const API='https://script.google.com/macros/s/AKfycbwUqJc0tXXrHVJLpXE4oQhp8d1mmf7rOt74ZpUCP9QY9z2AncvBAT7JWyl0HDLfvsJ3/exec';

async function analyze(){
  const addr=document.getElementById('addr').value.trim().toLowerCase();
  const res=document.getElementById('result');
  const btn=document.getElementById('analyzeBtn');
  if(!/^0x[0-9a-f]{40}$/.test(addr)){res.style.display='block';res.textContent='Invalid address format';return}
  res.style.display='block';res.textContent='Analyzing... (first call may take ~10s)';
  btn.disabled=true;
  try{
    const r=await fetch(`${API}?action=analyze&address=${addr}`);
    const d=await r.json();
    if(d.error){res.textContent='Error: '+d.error;return}
    let o=`Address: ${d.address}\n`;
    o+=`Type: ${d.type==='contract'?'ğŸ“„ Smart Contract':'ğŸ‘› Wallet (EOA)'}\n`;
    o+=`Balance: ${d.balance_eth.toFixed(6)} ETH (~$${d.balance_usd.toFixed(2)})\n`;
    o+=`Transactions: ${d.tx_count}\n`;
    if(d.type==='contract'){
      o+=`Code Size: ${d.code_size} bytes\n`;
      o+=`\n--- Detected Patterns ---\n`;
      if(d.patterns?.length)d.patterns.forEach(p=>o+=`  âœ“ ${p}\n`);
      else o+=`  No known patterns detected\n`;
      o+=`\n--- Standards ---\n`;
      if(d.standards?.length)d.standards.forEach(s=>o+=`  âœ“ ${s}\n`);
      else o+=`  No standard interfaces detected\n`;
      o+=`\nRecent Events (last ~10k blocks): ${d.recent_events>=0?d.recent_events:'N/A'}\n`;
    }
    o+=`\n--- Want deeper analysis? Use Premium Audit above ---`;
    res.textContent=o;
  }catch(e){res.textContent='Error: '+e.message}
  finally{btn.disabled=false}
}

function showPayment(){
  const addr=document.getElementById('premAddr').value.trim();
  if(!/^0x[0-9a-f]{40}$/i.test(addr)){alert('Enter a valid address first');return}
  document.getElementById('paymentSection').style.display='block';
  document.getElementById('auditBtn').disabled=true;
}

async function verifyAndAudit(){
  const addr=document.getElementById('premAddr').value.trim().toLowerCase();
  const txHash=document.getElementById('txHash').value.trim().toLowerCase();
  const status=document.getElementById('payStatus');
  const res=document.getElementById('premResult');
  if(!/^0x[0-9a-f]{64}$/.test(txHash)){status.className='status error';status.textContent='Invalid tx hash';return}
  status.className='status checking';status.innerHTML='<span class="loader"></span> Verifying payment on Base...';
  try{
    const r=await fetch(`${API}?action=deep_audit&address=${addr}&txHash=${txHash}`);
    const d=await r.json();
    if(d.error){status.className='status error';status.textContent='Error: '+d.error;return}
    status.className='status verified';status.textContent='âœ“ Payment verified! Audit complete.';
    res.style.display='block';
    let o=`â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n`;
    o+=`  DEEP SECURITY AUDIT REPORT\n`;
    o+=`  ${d.address}\n`;
    o+=`â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n`;
    o+=`ğŸ“Š Contract Size: ${d.code_size} bytes\n`;
    o+=`ğŸ“‹ Standards: ${d.standards?.join(', ')||'Unknown'}\n`;
    o+=`ğŸ¯ Risk Score: ${d.risk_score}/100 (${d.risk_level})\n\n`;
    o+=`â•â•â• FINDINGS â•â•â•\n\n`;
    if(d.findings?.length)d.findings.forEach((f,i)=>o+=`[${f.sev}] #${i+1}: ${f.msg}\n`);
    else o+=`No suspicious patterns detected.\n`;
    o+=`\nâ•â•â• STORAGE SLOTS â•â•â•\n\n`;
    if(d.storage_slots?.length)d.storage_slots.forEach(s=>o+=`Slot ${s.slot}: ${s.value}\n`);
    else o+=`No non-zero storage in first 10 slots.\n`;
    o+=`\nâ•â•â• FUNCTION SELECTORS â•â•â•\n`;
    o+=`Found ${d.selector_count} selectors\n`;
    if(d.selectors?.length)d.selectors.forEach(s=>o+=`  ${s}\n`);
    o+=`\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n`;
    o+=`  Generated: ${d.audit_timestamp}\n`;
    o+=`â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n`;
    res.textContent=o;
  }catch(e){status.className='status error';status.textContent='Error: '+e.message}
}
</script>
</body>
</html>
